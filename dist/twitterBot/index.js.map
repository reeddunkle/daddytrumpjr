{"version":3,"sources":["../../src/twitterBot/index.js"],"names":["run","app","get","req","res","send","listen","process","env","PORT","config","consumer_key","BOT_CONSUMER_KEY","consumer_secret","BOT_CONSUMER_SECRET","access_token_key","BOT_ACCESS_TOKEN","access_token_secret","BOT_ACCESS_TOKEN_SECRET","USERS","dtJR","test","client","path","params","follow","postTweet","status","post","seekApproval","tweet","text","stream","on"],"mappings":";;;;;kBA2CwBA,G;;AA3CxB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA;AACA,IAAMC,MAAM,wBAAZ;AACAA,IAAIC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAEA,MAAIC,IAAJ,CAAS,+BAAT;AAA4C,CAAzE;AACAJ,IAAIK,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA/B;;AAEA,IAAMC,SAAS;AACbC,gBAAcJ,QAAQC,GAAR,CAAYI,gBADb;AAEbC,mBAAiBN,QAAQC,GAAR,CAAYM,mBAFhB;AAGbC,oBAAkBR,QAAQC,GAAR,CAAYQ,gBAHjB;AAIbC,uBAAqBV,QAAQC,GAAR,CAAYU;AAJpB,CAAf;;AAOA,IAAMC,QAAQ;AACZC,QAAM,QADM;AAEZC,QAAM;AAFM,CAAd;;AAKA,IAAMC,SAAS,sBAAYZ,MAAZ,CAAf;AACA,IAAMa,OAAO,iBAAb;AACA,IAAMC,SAAS;AACbC,UAAQN,MAAMC;AADD,CAAf;;AAIA,SAASM,SAAT,CAAmBC,MAAnB,EAA2B;AACzBL,SAAOM,IAAP,CAAY,iBAAZ,EAA+B,EAAED,cAAF,EAA/B;AACD;;AAED,SAASE,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,SAAO,wFAILJ,SAJK,EAKLI,MAAMC,IALD,CAAP;AAMD;;AAEc,SAAS/B,GAAT,GAAe;AAC5BsB,SAAOU,MAAP,CAAcT,IAAd,EAAoBC,MAApB,EAA4B,UAACQ,MAAD,EAAY;AACtCA,WACGC,EADH,CACM,MADN,EACc,UAACH,KAAD,EAAW;AACrB,UAAI,yBAASN,OAAOC,MAAhB,EAAwBK,KAAxB,CAAJ,EAAoCD,aAAaC,KAAb;AACrC,KAHH;AAID,GALD;AAMD","file":"index.js","sourcesContent":["import express from 'express';\nimport flow from 'lodash/fp/flow';\nimport noop from 'lodash/noop';\nimport Twitter from 'twitter';\nimport { addApproval, cropText, decodeHTML, isAuthor } from '../tweetUtil';\nimport { onTweetPosted } from './util';\n\n// HEROKU SETUP\nconst app = express();\napp.get('/', (req, res) => { res.send('The robot is happily running.'); });\napp.listen(process.env.PORT || 5000);\n\nconst config = {\n  consumer_key: process.env.BOT_CONSUMER_KEY,\n  consumer_secret: process.env.BOT_CONSUMER_SECRET,\n  access_token_key: process.env.BOT_ACCESS_TOKEN,\n  access_token_secret: process.env.BOT_ACCESS_TOKEN_SECRET,\n};\n\nconst USERS = {\n  dtJR: 39344374,\n  test: 62298196,\n};\n\nconst client = new Twitter(config);\nconst path = 'statuses/filter';\nconst params = {\n  follow: USERS.dtJR,\n};\n\nfunction postTweet(status) {\n  client.post('statuses/update', { status }, onTweetPosted);\n}\n\nfunction seekApproval(tweet) {\n  return flow(\n    decodeHTML,\n    cropText,\n    addApproval,\n    postTweet,\n  )(tweet.text);\n}\n\nexport default function run() {\n  client.stream(path, params, (stream) => {\n    stream\n      .on('data', (tweet) => {\n        if (isAuthor(params.follow, tweet)) seekApproval(tweet);\n      });\n  });\n}\n"]}