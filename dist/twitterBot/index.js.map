{"version":3,"sources":["../../src/twitterBot/index.js"],"names":["run","config","consumer_key","process","env","BOT_CONSUMER_KEY","consumer_secret","BOT_CONSUMER_SECRET","access_token_key","BOT_ACCESS_TOKEN","access_token_secret","BOT_ACCESS_TOKEN_SECRET","client","USERS","dtJr","test","PATH","PARAMS","follow","postTweet","params","post","seekApproval","tweet","meetsRequirements","retweeted","stream","on"],"mappings":";;;;;kBA0CwBA,G;;AA1CxB;;;;AACA;;;;AACA;;AACA;;;;AAEA,IAAMC,SAAS;AACbC,gBAAcC,QAAQC,GAAR,CAAYC,gBADb;AAEbC,mBAAiBH,QAAQC,GAAR,CAAYG,mBAFhB;AAGbC,oBAAkBL,QAAQC,GAAR,CAAYK,gBAHjB;AAIbC,uBAAqBP,QAAQC,GAAR,CAAYO;AAJpB,CAAf;AAMA,IAAMC,SAAS,sBAAYX,MAAZ,CAAf;;AAEA,IAAMY,QAAQ;AACZC,QAAM,QADM;AAEZC,QAAM;AAFM,CAAd;AAIA,IAAMC,OAAO,iBAAb;AACA,IAAMC,SAAS;AACbC,UAAQL,MAAME;AADD,CAAf;;AAIA,SAASI,SAAT,CAAmBC,MAAnB,EAA2B;AACzBR,SAAOS,IAAP,CAAY,iBAAZ,EAA+BD,MAA/B;AACD;;AAED,SAASE,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAMC,oBACJ,CAACD,MAAME,SAAP,IACA,yBAASR,OAAOC,MAAhB,EAAwBK,KAAxB,CAFF;;AAKA,MAAIC,iBAAJ,EAAuB;AACrB,+EAGE,2BAAgBD,KAAhB,CAHF,EAIEJ,SAJF,EAKEI,KALF;AAMD;AACF;;AAEc,SAASvB,GAAT,GAAe;AAC5BY,SAAOc,MAAP,CAAcV,IAAd,EAAoBC,MAApB,EAA4B,UAACS,MAAD,EAAY;AACtCA,WAAOC,EAAP,CAAU,MAAV,EAAkBL,YAAlB;AACD,GAFD;AAGD","file":"index.js","sourcesContent":["import flow from 'lodash/fp/flow';\nimport Twitter from 'twitter';\nimport { buildApprovalText, getTweetText, isAuthor } from '../tweetUtil';\nimport { buildPostParams, onTweetPosted } from './util';\n\nconst config = {\n  consumer_key: process.env.BOT_CONSUMER_KEY,\n  consumer_secret: process.env.BOT_CONSUMER_SECRET,\n  access_token_key: process.env.BOT_ACCESS_TOKEN,\n  access_token_secret: process.env.BOT_ACCESS_TOKEN_SECRET,\n};\nconst client = new Twitter(config);\n\nconst USERS = {\n  dtJr: 39344374,\n  test: 62298196,\n};\nconst PATH = 'statuses/filter';\nconst PARAMS = {\n  follow: USERS.test,\n};\n\nfunction postTweet(params) {\n  client.post('statuses/update', params, onTweetPosted);\n}\n\nfunction seekApproval(tweet) {\n  const meetsRequirements = (\n    !tweet.retweeted &&\n    isAuthor(PARAMS.follow, tweet)\n  );\n\n  if (meetsRequirements) {\n    flow(\n      getTweetText,\n      buildApprovalText,\n      buildPostParams(tweet),\n      postTweet,\n    )(tweet);\n  }\n}\n\nexport default function run() {\n  client.stream(PATH, PARAMS, (stream) => {\n    stream.on('data', seekApproval);\n  });\n}\n"]}