{"version":3,"sources":["../../src/twitterBot/index.js"],"names":["run","config","consumer_key","process","env","BOT_CONSUMER_KEY","consumer_secret","BOT_CONSUMER_SECRET","access_token_key","BOT_ACCESS_TOKEN","access_token_secret","BOT_ACCESS_TOKEN_SECRET","client","USERS","dtJR","test","PATH","PARAMS","follow","postTweet","status","post","seekApproval","onTweetReceived","tweet","meetsRequirements","retweeted","console","log","text","stream","on"],"mappings":";;;;;kBA6CwBA,G;;AA7CxB;;;;AACA;;;;AACA;;AACA;;;;AAEA,IAAMC,SAAS;AACbC,gBAAcC,QAAQC,GAAR,CAAYC,gBADb;AAEbC,mBAAiBH,QAAQC,GAAR,CAAYG,mBAFhB;AAGbC,oBAAkBL,QAAQC,GAAR,CAAYK,gBAHjB;AAIbC,uBAAqBP,QAAQC,GAAR,CAAYO;AAJpB,CAAf;AAMA,IAAMC,SAAS,sBAAYX,MAAZ,CAAf;;AAEA,IAAMY,QAAQ;AACZC,QAAM,QADM;AAEZC,QAAM;AAFM,CAAd;AAIA,IAAMC,OAAO,iBAAb;AACA,IAAMC,SAAS;AACbC,UAAQL,MAAMC;AADD,CAAf;;AAIA,SAASK,SAAT,CAAmBC,MAAnB,EAA2B;AACzBR,SAAOS,IAAP,CAAY,iBAAZ,EAA+B,EAAED,cAAF,EAA/B;AACD;;AAED,IAAME,eAAe,wFAInBH,SAJmB,CAArB;;AAOA,SAASI,eAAT,CAAyBC,KAAzB,EAAgC;AAC9B,MAAMC,oBACJ,CAACD,MAAME,SAAP,IACA,yBAAST,OAAOC,MAAhB,EAAwBM,KAAxB,CAFF;;AAKA,MAAIC,iBAAJ,EAAuB;AACrBE,YAAQC,GAAR,CAAYJ,KAAZ;AACAF,iBAAaE,MAAMK,IAAnB;AACD;AACF;;AAEc,SAAS7B,GAAT,GAAe;AAC5BY,SAAOkB,MAAP,CAAcd,IAAd,EAAoBC,MAApB,EAA4B,UAACa,MAAD,EAAY;AACtCA,WAAOC,EAAP,CAAU,MAAV,EAAkBR,eAAlB;AACD,GAFD;AAGD","file":"index.js","sourcesContent":["import flow from 'lodash/fp/flow';\nimport Twitter from 'twitter';\nimport { addApproval, cropText, decodeHTML, isAuthor } from '../tweetUtil';\nimport { onTweetPosted } from './util';\n\nconst config = {\n  consumer_key: process.env.BOT_CONSUMER_KEY,\n  consumer_secret: process.env.BOT_CONSUMER_SECRET,\n  access_token_key: process.env.BOT_ACCESS_TOKEN,\n  access_token_secret: process.env.BOT_ACCESS_TOKEN_SECRET,\n};\nconst client = new Twitter(config);\n\nconst USERS = {\n  dtJR: 39344374,\n  test: 62298196,\n};\nconst PATH = 'statuses/filter';\nconst PARAMS = {\n  follow: USERS.dtJR,\n};\n\nfunction postTweet(status) {\n  client.post('statuses/update', { status }, onTweetPosted);\n}\n\nconst seekApproval = flow(\n  decodeHTML,\n  cropText,\n  addApproval,\n  postTweet,\n);\n\nfunction onTweetReceived(tweet) {\n  const meetsRequirements = (\n    !tweet.retweeted &&\n    isAuthor(PARAMS.follow, tweet)\n  );\n\n  if (meetsRequirements) {\n    console.log(tweet);\n    seekApproval(tweet.text);\n  }\n}\n\nexport default function run() {\n  client.stream(PATH, PARAMS, (stream) => {\n    stream.on('data', onTweetReceived);\n  });\n}\n"]}